# Sway configuration for headless browser automation

### Variables
set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $term alacritty

### Output configuration
output HEADLESS-1 mode 1920x1080 position 0,0

# Disable Xwayland for pure Wayland operation
xwayland disable

# Make all windows floating by default
for_window [app_id=".*"] floating enable
# for_window [app_id=".*"] border normal
# for_window [app_id=".*"] resize set 100 ppt 100 ppt

### Key bindings
# Start terminal
bindsym $mod+Return exec $term

# Kill focused window
bindsym $mod+Shift+q kill

# Drag floating windows by holding down $mod and left mouse button
floating_modifier $mod normal

# Right-click on title bar for window menu
bindsym --border button3 exec pgrep -f "Window Options" -a | grep -v "[p]grep" >/dev/null || swaynag -t warning -m "Window Options" -B "Close" "swaymsg kill"

# Reload the configuration file
bindsym $mod+Shift+c reload

# Exit sway
bindsym $mod+Shift+e exec swaynag -t warning -m 'Exit sway?' -B 'Yes' 'swaymsg exit'

### Status Bar
bar {
    position top
    status_command while date +'[Terminal] %Y-%m-%d %I:%M:%S %p'; do sleep 1; done
    
    colors {
        statusline #ffffff
        background #323232
        inactive_workspace #32323200 #32323200 #5c5c5c
    }
    
    bindsym button1 exec $term
}

include /etc/sway/config.d/*

# Start wayvnc for VNC access
exec wayvnc -C ~/.config/wayvnc/config

# Alternative terminal keybinds since original is broken
bindsym Alt+Return exec $term